<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Matadi Fans - OnlyFans Style</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
  --bg:#0b0c10;
  --card:#1f1f1f;
  --text:#e5e5e5;
  --muted:#aaa;
  --accent:#ff3c3c;
  --blue:#22a6f3;
  --green:#27ae60;
}
*{box-sizing:border-box;margin:0;padding:0;font-family:Arial,Helvetica,sans-serif}
body{background:var(--bg);color:var(--text);overflow:hidden}
button{cursor:pointer;border:none;border-radius:6px;padding:8px 12px;font-weight:bold;transition:0.3s;}
button:hover{opacity:0.8}
.hidden{display:none}

/* AUTH */
.auth{position:fixed;inset:0;display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,#0b0c10,#1f1f1f);}
.auth-box{background:var(--card);padding:30px;width:360px;border-radius:15px;box-shadow:0 0 40px #000;}
.auth-box h2{text-align:center;margin-bottom:15px}
.auth-box input, .auth-box select{width:100%;padding:12px;margin-bottom:12px;background:#111;color:#fff;border-radius:8px;border:1px solid #333;font-size:14px}
.auth-box button{width:100%;background:var(--accent);color:#fff;margin-bottom:8px}
.switch{text-align:center;color:var(--blue);cursor:pointer;font-size:13px}

/* APP */
.app{display:flex;height:100vh;overflow:hidden}

/* SIDEBAR */
.sidebar{width:260px;background:#111;padding:20px;display:flex;flex-direction:column;flex-shrink:0}
.sidebar h2{color:var(--accent);margin-bottom:20px}
.sidebar div{margin-bottom:12px;color:var(--muted);cursor:pointer;font-size:14px;padding:8px;border-radius:8px}
.sidebar div:hover{background:#222;color:#fff}
.sidebar .bottom{margin-top:auto}

/* TOPBAR */
.topbar{background:#111;padding:12px 20px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #222}

/* FEED */
.feed{flex:1;overflow-y:auto;padding:20px}
.post{background:var(--card);border-radius:15px;padding:15px;margin-bottom:20px;transition:0.3s}
.post:hover{background:#222}
.post-header{display:flex;align-items:center;gap:12px;margin-bottom:10px}
.avatar{width:48px;height:48px;border-radius:50%;background:#555;flex-shrink:0}
.post img{width:100%;border-radius:12px;margin-top:10px}
.actions{display:flex;gap:12px;margin-top:10px;font-size:14px}
.actions span{cursor:pointer;transition:0.3s}
.actions span:hover{color:var(--accent)}

/* MODAL */
.modal{position:fixed;inset:0;background:rgba(0,0,0,0.75);display:none;align-items:center;justify-content:center;z-index:999;}
.modal-content{background:var(--card);padding:25px;width:90%;max-width:420px;border-radius:15px}
.modal-content textarea,input{width:100%;padding:12px;margin-bottom:10px;background:#111;border-radius:8px;color:#fff;border:none}

/* PROFILE PANEL */
.profile-panel{padding:20px;overflow-y:auto;flex:1}
.card{background:var(--card);padding:15px;border-radius:12px;margin-bottom:15px}
.card h3{margin-bottom:8px}

/* ANIMATIONS */
.like-anim{animation:likePop 0.5s ease;}
@keyframes likePop{0%{transform:scale(1)}50%{transform:scale(1.5)}100%{transform:scale(1)}}
</style>
</head>
<body>

<!-- AUTH -->
<div class="auth" id="auth">
  <div class="auth-box" id="registerBox">
    <h2>Cr√©er un compte</h2>
    <input id="name" placeholder="Nom">
    <input id="email" placeholder="Email">
    <input id="password" type="password" placeholder="Mot de passe">
    <select id="role">
      <option value="client">Acheteur</option>
      <option value="vendeur">Vendeur</option>
      <option value="prestataire">Prestataire</option>
    </select>
    <button onclick="register()">S'inscrire</button>
    <div class="switch" onclick="toggleAuth()">D√©j√† un compte ? Connexion</div>
  </div>
  <div class="auth-box hidden" id="loginBox">
    <h2>Connexion</h2>
    <input id="emailL" placeholder="Email">
    <input id="passwordL" type="password" placeholder="Mot de passe">
    <button onclick="login()">Se connecter</button>
    <div class="switch" onclick="toggleAuth()">Cr√©er un compte</div>
  </div>
</div>

<!-- APP -->
<div class="app hidden" id="app">
  <div class="sidebar">
    <h2>MATADI FANS</h2>
    <div onclick="loadFeed()">üè† Feed</div>
    <div onclick="createPost()">‚ûï Publier</div>
    <div onclick="profilePanel()">üë§ Profil</div>
    <div onclick="logout()">üö™ D√©connexion</div>
    <div class="bottom">Version OnlyFans-style ‚Ä¢ Matadi</div>
  </div>
  <div style="flex:1;display:flex;flex-direction:column">
    <div class="topbar">
      <span id="userInfo"></span>
      <span>Local ‚Ä¢ Matadi</span>
    </div>
    <div class="feed" id="feed"></div>
  </div>
</div>

<!-- MODAL -->
<div class="modal" id="postModal">
  <div class="modal-content">
    <h3>Cr√©er un post</h3>
    <input id="postTitle" placeholder="Titre du post">
    <textarea id="postDesc" placeholder="Description"></textarea>
    <input id="postImage" placeholder="Image URL (optionnel)">
    <button onclick="submitPost()">Publier</button>
  </div>
</div>

<script>
let users = JSON.parse(localStorage.getItem("users")||"[]");
let posts = JSON.parse(localStorage.getItem("posts")||"[]");
let currentUser = JSON.parse(localStorage.getItem("currentUser"));

if(currentUser) startApp();

function toggleAuth(){
  registerBox.classList.toggle("hidden");
  loginBox.classList.toggle("hidden");
}

function register(){
  const n=name.value,e=email.value,p=password.value,r=role.value;
  if(!n||!e||!p){alert("Remplir tous les champs");return;}
  if(users.some(u=>u.email===e)){alert("Email d√©j√† utilis√©");return;}
  const u={name:n,email:e,pw:p,role:r};
  users.push(u);localStorage.setItem("users",JSON.stringify(users));
  currentUser=u;localStorage.setItem("currentUser",JSON.stringify(currentUser));
  startApp();
}

function login(){
  const e=emailL.value,p=passwordL.value;
  const u=users.find(x=>x.email===e && x.pw===p);
  if(!u){alert("Email ou mot de passe incorrect");return;}
  currentUser=u;localStorage.setItem("currentUser",JSON.stringify(currentUser));
  startApp();
}

function logout(){localStorage.removeItem("currentUser");location.reload();}

function startApp(){
  auth.classList.add("hidden");
  app.classList.remove("hidden");
  userInfo.innerText=currentUser.name+" ‚Ä¢ "+currentUser.role;
  loadFeed();
}

function loadFeed(){
  feed.innerHTML="";
  if(posts.length===0){feed.innerHTML="<p style='color:#888'>Aucun post pour le moment</p>";return;}
  posts.forEach((p,i)=>{
    const d=document.createElement("div");
    d.className="post";
    d.innerHTML=`
      <div class="post-header"><div class="avatar"></div><strong>${p.title} - ${p.author}</strong></div>
      <p>${p.desc}</p>
      ${p.img?`<img src="${p.img}">`:''}
      <div class="actions">
        <span onclick="like(${i},this)">‚ù§Ô∏è ${p.likes}</span>
        <span>‚≠ê S'abonner</span>
      </div>
    `;
    feed.appendChild(d);
  });
}

function like(i,el){
  posts[i].likes++;
  localStorage.setItem("posts",JSON.stringify(posts));
  el.classList.add("like-anim");
  setTimeout(()=>el.classList.remove("like-anim"),500);
  loadFeed();
}

function createPost(){postModal.style.display="flex";}

function submitPost(){
  const t=document.getElementById("postTitle").value,
        d=document.getElementById("postDesc").value,
        i=document.getElementById("postImage").value;
  if(!t){alert("Titre requis");return;}
  posts.unshift({title:t,desc:d,img:i,author:currentUser.name,likes:0});
  localStorage.setItem("posts",JSON.stringify(posts));
  postModal.style.display="none";
  document.getElementById("postTitle").value="";
  document.getElementById("postDesc").value="";
  document.getElementById("postImage").value="";
  loadFeed();
}

function profilePanel(){
  let html=`<div class="card"><h3>Profil de ${currentUser.name}</h3><p>R√¥le : ${currentUser.role}</p><p>Email : ${currentUser.email}</p></div>`;
  feed.innerHTML=html;
}
</script>

</body>
</html>
